# ProRT-IP v0.4.0 TODO List

**Created:** 2025-10-15
**Total Tasks:** 33 tasks across 6 sprints
**Estimated Duration:** 18-20 days total
**Target Release:** v0.4.0

## Sprint Overview

| Sprint | Duration | Tasks | Priority | Status |
|--------|----------|-------|----------|--------|
| 4.18.1 | ~11 hours | 6 | HIGH | Pending |
| 4.18.4 | ~4-6 hours | 5 | HIGH | Pending |
| 4.20 | ~4-5 days | 4 | MEDIUM | Pending |
| 4.21 | ~3-4 days | 4 | MEDIUM | Pending |
| 4.22 | ~3-4 days | 4 | MEDIUM | Pending |
| 4.23 | ~2-3 days | 4 | LOW | Pending |

---

## Sprint 4.18.1: SQLite Query Interface & Export (~11 hours)

**Priority:** HIGH | **ROI:** 7.3/10 | **Status:** Pending

### Tasks

- [ ] **TASK 1: Database Indexes (1 hour)**
  - Create indexes on frequently queried columns
  - Add composite indexes for multi-column queries
  - Benchmark query performance improvements
  - **Status:** Pending

- [ ] **TASK 2: Query Interface Module (3 hours)**
  - Create `crates/prtip-scanner/src/scan_query.rs`
  - Implement query methods (by port, service, banner pattern)
  - Add filtering and aggregation capabilities
  - Write 15+ unit tests
  - **Status:** Pending

- [ ] **TASK 3: CLI Query Subcommand (2 hours)**
  - Add `prtip query` subcommand
  - Implement flags: --port, --service, --banner, --ip, --format
  - Integrate with ScanQuery module
  - Add 8+ integration tests
  - **Status:** Pending

- [ ] **TASK 4: Export Utilities (3 hours)**
  - Create export module with CSV, JSON, XML formatters
  - Implement streaming for large datasets
  - Add command: `prtip export <scan_id> --format <csv|json|xml>`
  - Write 10+ tests for all formats
  - **Status:** Pending

- [ ] **TASK 5: Integration Tests (1 hour)**
  - End-to-end query workflow tests
  - Export format validation tests
  - Performance benchmarks for large datasets
  - **Status:** Pending

- [ ] **TASK 6: Documentation (1 hour)**
  - Update docs/OUTPUT-FORMATS.md with query examples
  - Add EXAMPLES.md with 10+ query scenarios
  - Update README.md with query/export features
  - **Status:** Pending

---

## Sprint 4.18.4: Complete PCAPNG Integration (~4-6 hours)

**Priority:** HIGH | **ROI:** 7.5/10 | **Status:** Pending

**Dependencies:** Sprint 4.18.3 complete (scheduler refactor done ✅)

### Tasks

- [ ] **TASK 1: TCP Connect Scanner PCAPNG (1 hour)**
  - Integrate PCAPNG writer into `tcp_scanner.rs`
  - Capture connection establishment packets
  - Test with --packet-capture flag
  - Verify Wireshark compatibility
  - **Status:** Pending

- [ ] **TASK 2: SYN Scanner PCAPNG (0.5 hour)**
  - Integrate PCAPNG writer into `syn_scanner.rs`
  - Capture SYN/SYN-ACK/RST packets
  - Follow UDP scanner pattern (proven working)
  - **Status:** Pending

- [ ] **TASK 3: Stealth Scanner PCAPNG (0.5 hour)**
  - Integrate PCAPNG writer into stealth scanners (FIN/NULL/Xmas/ACK)
  - Capture stealth scan packets
  - Test all 4 stealth scan types
  - **Status:** Pending

- [ ] **TASK 4: Integration Tests (1 hour)**
  - Write end-to-end PCAPNG capture tests for TCP/SYN/Stealth
  - Verify packet counts and direction tracking
  - Test file rotation at 1GB threshold
  - Add 8+ tests (2 per scanner type)
  - **Status:** Pending

- [ ] **TASK 5: Documentation OUTPUT-FORMATS.md (1-2 hours)**
  - Complete PCAPNG section in docs/OUTPUT-FORMATS.md
  - Add usage examples for all scanner types
  - Document Wireshark analysis workflow
  - Update README.md with PCAPNG feature
  - **Status:** Pending

---

## Sprint 4.20: Fragmentation & Evasion (~4-5 days)

**Priority:** MEDIUM | **ROI:** 7.0/10 | **Status:** Pending

### Tasks

- [ ] **TASK 1: IP Fragmentation Implementation (2 days)**
  - Implement IP fragmentation logic in packet builder
  - Add `-f` flag (fragment packets)
  - Add `--mtu <bytes>` flag (fragment size control)
  - Add `-ff` flag (use tiny fragments)
  - Write fragmentation tests (15+ tests)
  - **Status:** Pending

- [ ] **TASK 2: TTL and IP Options (1 day)**
  - Implement TTL manipulation (--ttl <value>)
  - Add IP options support (record route, loose source routing)
  - Add timestamp option
  - Write 10+ tests
  - **Status:** Pending

- [ ] **TASK 3: Evasion Techniques (1 day)**
  - Implement bad checksum generation (--badsum)
  - Add data length manipulation
  - Add IP ID manipulation for idle scan preparation
  - Write 8+ evasion tests
  - **Status:** Pending

- [ ] **TASK 4: CLI Integration & Testing (0.5-1 day)**
  - Wire all flags to scanners
  - Add fragmentation examples to help system
  - Write 15+ integration tests
  - Update documentation (TECHNIQUES.md)
  - **Status:** Pending

---

## Sprint 4.21: IPv6 Complete Implementation (~3-4 days)

**Priority:** MEDIUM | **ROI:** 6.8/10 | **Status:** Pending

### Tasks

- [ ] **TASK 1: IPv6 Packet Building (1.5 days)**
  - Create IPv6 packet builder module
  - Implement extension headers (Hop-by-Hop, Routing, Fragment)
  - Add IPv6 checksum calculation
  - Write 20+ packet building tests
  - **Status:** Pending

- [ ] **TASK 2: IPv6 Scanning Logic (1 day)**
  - Implement ICMPv6 neighbor discovery
  - Add IPv6 TCP/UDP scanning support
  - Implement IPv6 service detection
  - Write 15+ scanning tests
  - **Status:** Pending

- [ ] **TASK 3: Dual-Stack Support (0.5 day)**
  - Enable simultaneous IPv4 + IPv6 scanning
  - Add auto-detection of target IP version
  - Implement `-6` flag for IPv6-only mode
  - Write 8+ dual-stack tests
  - **Status:** Pending

- [ ] **TASK 4: CLI Integration & Testing (1 day)**
  - Wire IPv6 flags to all scanners
  - Add IPv6 examples to help system
  - Write 20+ integration tests
  - Update documentation (IPv6-GUIDE.md)
  - **Status:** Pending

---

## Sprint 4.22: Error Handling & Resilience (~3-4 days)

**Priority:** MEDIUM | **ROI:** 6.5/10 | **Status:** Pending

### Tasks

- [ ] **TASK 1: Error Context Enhancement (1.5 days)**
  - Add context to all error types
  - Implement user-friendly error messages with suggestions
  - Add error categorization (network, permission, configuration)
  - Write 25+ error message tests
  - **Status:** Pending

- [ ] **TASK 2: Recovery Mechanisms (1 day)**
  - Implement retry logic with exponential backoff
  - Add circuit breaker pattern for failing targets
  - Add graceful degradation for partial failures
  - Write 15+ recovery tests
  - **Status:** Pending

- [ ] **TASK 3: Resource Constraint Handling (0.5-1 day)**
  - Detect and handle low memory conditions
  - Add adaptive rate limiting under constraints
  - Implement connection pool management
  - Write 10+ resource handling tests
  - **Status:** Pending

- [ ] **TASK 4: Testing & Documentation (1 day)**
  - Write comprehensive error handling tests
  - Document error codes and recovery strategies
  - Create ERROR-HANDLING.md guide
  - Add troubleshooting section to README
  - **Status:** Pending

---

## Sprint 4.23: Documentation & Release Prep v0.4.0 (~2-3 days)

**Priority:** MEDIUM | **ROI:** 6.0/10 | **Status:** Pending

### Tasks

- [ ] **TASK 1: Documentation Completion (1-1.5 days)**
  - Update all root-level markdown files
  - Complete all docs/ technical documentation
  - Update CHANGELOG.md with all v0.4.0 changes
  - Review and update ROADMAP.md
  - **Status:** Pending

- [ ] **TASK 2: Example Scenarios (0.5 day)**
  - Create 10+ comprehensive example scenarios
  - Document common use cases
  - Add advanced technique examples
  - Update EXAMPLES.md
  - **Status:** Pending

- [ ] **TASK 3: Release Notes (0.5 day)**
  - Write comprehensive v0.4.0 release notes
  - Create GitHub release draft
  - Document breaking changes (if any)
  - Prepare announcement text
  - **Status:** Pending

- [ ] **TASK 4: Final Testing & Validation (0.5-1 day)**
  - Run full test suite (target: 1,000+ tests)
  - Verify coverage targets (63-65%)
  - Cross-platform testing (Linux, Windows, macOS)
  - Performance benchmarking validation
  - CI/CD pipeline verification (7/7 jobs)
  - **Status:** Pending

---

## Success Criteria for v0.4.0 Release

### Quantitative Metrics

- [ ] **Tests:** 1,000+ tests passing (100%)
  - Current: 933 tests
  - Target: 1,000+ tests
  - Increase: +67+ tests

- [ ] **Coverage:** 63-65% code coverage
  - Current: 61.92% (15,397/24,814 lines)
  - Target: 63-65% (15,624-16,129 lines)
  - Increase: +227-732 lines covered

- [ ] **CI/CD:** 7/7 jobs passing on all platforms
  - Format Check ✅
  - Clippy Lint ✅
  - Test (Ubuntu, Windows, macOS) ✅
  - Security Audit ✅
  - MSRV Check (1.85) ✅

- [ ] **Release Platforms:** 8/8 targets building
  - x86_64-unknown-linux-gnu ✅
  - x86_64-unknown-linux-musl ✅
  - x86_64-pc-windows-msvc ✅
  - x86_64-apple-darwin ✅
  - aarch64-unknown-linux-gnu ✅
  - aarch64-unknown-linux-musl ✅
  - aarch64-apple-darwin ✅
  - aarch64-pc-windows-msvc ✅

### Qualitative Metrics

- [ ] **PCAPNG Complete:** All scanner types support packet capture
- [ ] **SQLite Export:** Query interface + CSV/JSON/XML export working
- [ ] **Fragmentation:** IP fragmentation for firewall evasion implemented
- [ ] **IPv6 Complete:** Full IPv6 scanning + dual-stack support
- [ ] **Error Handling:** Comprehensive retry logic + user-friendly messages
- [ ] **Documentation:** All features documented with examples

---

## Progress Tracking

**Start Date:** TBD
**Target Completion:** TBD (18-20 days from start)
**Current Sprint:** Sprint 4.18.1 (pending)
**Overall Progress:** 0/33 tasks complete (0%)

### Sprint Progress

- Sprint 4.18.1: 0/6 tasks (0%)
- Sprint 4.18.4: 0/5 tasks (0%)
- Sprint 4.20: 0/4 tasks (0%)
- Sprint 4.21: 0/4 tasks (0%)
- Sprint 4.22: 0/4 tasks (0%)
- Sprint 4.23: 0/4 tasks (0%)

---

## Notes

- This todo list complements the comprehensive development plan in `v0.4.0-DEVELOPMENT-PLAN.md`
- Each sprint has detailed implementation guidance in the plan document
- Sprint 4.18.3 (scheduler refactor) is already complete ✅
- SQLite and PCAPNG sprints are independent and can be executed in parallel if desired
- Sprints 4.20-4.23 should be executed sequentially after 4.18.1 and 4.18.4

---

**Last Updated:** 2025-10-15
**Status:** All tasks pending, ready to begin Sprint 4.18.1
